# Init containers

Un Pod puede tener múltiples contenedores ejecutando aplicaciones dentro de él, pero también puede tener uno o más contenedores de inicialización que se ejecutan antes de que se inicien los contenedores de aplicación.

Los contenedores de inicialización son exactamente iguales a los contenedores regulares excepto por:

- Los contenedores de inicialización siempre se ejecutan hasta su finalización.
- Cada contenedor de inicialiación debe completarse correctamente antes de que comience el siguiente.

A continuacion mostramos un ejemplo:

```
apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment-init
  labels:
      app: deployment-init
spec:
  replicas: 1
  selector:
    matchLabels:
      app: my-pod
  template: 
    metadata:
      labels: 
        app: my-pod         
    spec:
      containers:
      - name: nginx
        image: nginx
        ports:
        - containerPort: 80
        volumeMounts:
        - name: workdir
          mountPath: /usr/share/nginx/html
      # These containers are run during pod initialization
      initContainers:
      - name: install
        image: busybox:1.28
        command: ["wget","-O","/work-dir/index.html","https://checkip.amazonaws.com"]
        volumeMounts:
        - name: workdir
          mountPath: "/work-dir"
      volumes:
      - name: workdir
        emptyDir: {}
```

```
kubectl apply -f deployment-init.yaml 
```
Vamos a acceder a un pod con el siguiente comando

```
kubectl exec -it my-deployment-XXXXXXXXXX-XXXXX bash
```

Una vez dentro del container vamos a imprimir el contenido de index.html que se genero en el initContainer y deberiamos ver la IP publica de la instancia que contiene al pod

```
curl localhost
```
Ahora eliminamos el deployment

```
kubectl delete -f deployment-init.yaml 
```
