# Deployment

Un Deployment proporciona actualizaciones declarativas para Pods y ReplicaSets. Puedes definir Deployments para crear nuevos ReplicaSets o eliminar Deployments existentes y adoptar todos sus recursos con Deployments nuevos.

![kubernetes architecture](/img/2.3.imagen.png)

Tu describes un estado deseado en un Deployment y el controlador del Deployment cambia el estado actual al estado deseado.

## Metodo declarativo

- Crear un deployment usando un YAML

Creamos el archivo "deployment-definition.yaml" con el siguiente contenido

```
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-deployment
  labels:
      app: my-deployment
spec:
  replicas: 2
  selector:
    matchLabels:
      app: my-pod
  template: 
    metadata:
      labels: 
        app: my-pod         
    spec:
      containers:
        - name: nginx-container
          image: nginx
          ports:
            - containerPort: 80
```
```
kubectl create -f deployment-definition.yaml
```
- Eliminamos el deployment

```
kubectl delete -f deployment-definition.yaml
```

## Metodos imperativos

- Crear un deployment
```
kubectl create deployment <Deplyment-Name> --image=<Container-Image>
```
Ejemplo
```
kubectl create deployment my-first-deployment --image=nginx
```

- Listar Deployments
```
kubectl get deployments
```

- Describir un Deployment
```
kubectl describe deployment <deployment-name>
```  
- Ver el replicaset
```
kubectl get replicaset
```
- Ver pods
```
kubectl get pods
```

- Eliminar un Deployment
```
kubectl delete deployment <deployment-name>
```
- Escalando el deployment
```
kubectl scale --replicas=2 deployment <Deployment-Name>
```
  


